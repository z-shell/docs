if [[ "$1" = "build" ]]; then
  .zi-build-module "${@[2,-1]}"
elif [[ "$1" = "info" ]]; then
  if [[ "$2" = "--link" ]]; then
    builtin print -r "You can copy the error messages and submit"
    builtin print -r "error-report at: https://github.com/z-shell/zpmod/issues"
  else
    builtin print -r "To load the module, add following 2 lines to .zshrc, at top:"
    builtin print -r "    module_path+=( ${ZI[ZMODULES_DIR]}/zpmod/Src )"
    builtin print -r "    zmodload zi/zpmod"
    builtin print -r ""
    builtin print -r "After loading, use command \`zpmod' to communicate with the module."
    builtin print -r "See \`zpmod -h' for more information."
  fi
elif [[ "$1" = (help|usage) ]]; then
  builtin print -r "Usage: zi module {build|info|help} [options]"
  builtin print -r "       zi module build [--clean]"
  builtin print -r "       zi module info [--link]"
  builtin print -r ""
  builtin print -r "To start using the ❮ ZI ❯ Zsh module run: \`zi module build'"
  builtin print -r "and follow the instructions. Option --clean causes \`make distclean'"
  builtin print -r "to be run. To display the instructions on loading the module, run:"
  builtin print -r "\`zi module info'."
fi
