emulate -LR zsh
setopt extendedglob typesetsilent warncreateglobal

local f="$1" quiet="$2"

typeset -a commands
commands=( ${(k)_comps[(Re)$f]} )

[[ "${#commands}" -gt 0 ]] && (( quiet == 0 )) && builtin print -Prn "Forgetting commands completed by \`${ZI[col-obj]}$f%f%b': "

local k
integer first=1
for k ( $commands ) {
  unset "_comps[$k]"
  (( quiet )) || builtin print -Prn "${${first:#1}:+, }${ZI[col-info]}$k%f%b"
  first=0
}
(( quiet || first )) || builtin print

unfunction -- 2>/dev/null "$f"
