(( !${+ICE[countdown]} )) && return 0
emulate -L zsh -o extendedglob
trap "+zi-message \"{ehi}ABORTING, the ice {ice}$ice{ehi} not ran{rst}\"; return 1" INT
local count=5 tpe="$1" ice
ice="${ICE[$tpe]}"
[[ $tpe = "atpull" && $ice = "%atclone" ]] && ice="${ICE[atclone]}"
ice="{b}{ice}$tpe{ehi}:{rst}${ice//(#b)(\{[a-z0-9…–_-]##\})/\\$match[1]}"
+zi-message -n "{hi}Running $ice{rst}{hi} ice in...{rst} "
while (( -- count + 1 )) {
  +zi-message -n -- "{b}{error}"$(( count + 1 ))"{rst}{…}"
  sleep 1
}
+zi-message -r -- "{b}{error}0 <running now>{rst}{…}"
return 0
